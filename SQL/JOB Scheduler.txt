
CREATE OR REPLACE PROCEDURE delete_unwanted AS
BEGIN
DELETE FROM REGISTRATION WHERE USERNAME NOT IN (SELECT USERNAME FROM PERSONAL_INFO union SELECT USERNAME FROM ORG_INFO) AND USER_TYPE != 'Admin';
COMMIT;
END delete_unwanted;
/

BEGIN
DBMS_SCHEDULER.CREATE_JOB
(
JOB_NAME => 'Delete_Unwanted_Job',
JOB_TYPE => 'STORED_PROCEDURE',
JOB_ACTION => 'delete_unwanted',
REPEAT_INTERVAL => 'FREQ=MINUTELY;INTERVAL=15',
AUTO_DROP => FALSE,
COMMENTS => 'Delete_job' 
);
END;
/

EXEC DBMS_SCHEDULER.ENABLE('Delete_Unwanted_Job');

---FOR REMOVING SCHEDULED JOB
BEGIN
  dbms_scheduler.drop_job(job_name => 'Delete_Unwanted_Job');
END;
/